var S=Object.defineProperty;var v=(r,e,t)=>e in r?S(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var m=(r,e,t)=>(v(r,typeof e!="symbol"?e+"":e,t),t);import{S as f}from"./Sketch-BAjGWOdi.js";import{F as d}from"./FourierSeries-DOBcjM39.js";import{C as g}from"./tuples-6lOvLNBg.js";function _(r,e,t){r.beginShape();for(const{x:s,y:a}of e)r.vertex(s,a);t?r.endShape(r.CLOSE):r.endShape()}const w=2,c=800,y=3;class z extends f{constructor(){super(...arguments);m(this,"start_frame",0);m(this,"curve",[])}setup(t){const s=t.createCanvas(500,700);f.show_canvas(s.elt)}draw(t){t.background(0);const{pattern:s,show_arm:a}=this.state;if(!s)return;const n=t.frameCount-this.start_frame,o=n/c*t.TWO_PI;t.push(),t.translate(t.width/2,t.height/2);const i=t.width/(2*w);t.scale(i,-i),t.strokeWeight(y/i);const u=[...s.partial_sums(o)].map(l=>({x:l.real,y:l.imag}));n<c&&this.curve.push(u[u.length-1]),t.noFill(),t.strokeJoin(t.ROUND),t.stroke(71,142,204),_(t,this.curve,n>=c),a&&(t.stroke(255),_(t,u,!1)),t.pop()}set show_arm(t){this.state.show_arm=t}set pattern(t){this.state.pattern=t}recompute_curve(){const t=this.state.pattern;if(!t)return;const s=this.curve.length;for(let a=0;a<s;a++){const n=a/c*2*Math.PI,o=t.compute(n);this.curve[a]={x:o.real,y:o.imag}}}restart_animation(){var t;this.curve.length=0,this.start_frame=((t=this.sketch)==null?void 0:t.frameCount)??0}}const C=3,k=3,h=new g(C,k);class P{serialize(e){return{terms:e.terms.map(s=>{const{frequency:a,coefficient:n}=s,{r:o,theta:i}=n;return h.serialize([a,o,i])})}}validate(e){if(!Array.isArray(e.terms))return console.error("terms must be an array"),!1;for(const t of e.terms)if(!h.validate(t))return!1;return!0}deserialize(e){const t=e.terms.map(s=>{const[a,n,o]=h.deserialize(s);return[a,n,o]});return d.from_tuples(t)}}export{P as F,z as P};
